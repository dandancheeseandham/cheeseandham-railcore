; Provides a custom configuration area for the railcore user.
;Use-case : By keeping any custom definitions in this file (such as Z probe attributes, axis minima/maxima and anything else that you wish to override in config.g
;         : it will enable the user to easily keep track of their own changes to the default config, as well as provide a simple upgrade path for future Github releases.
;         *** Uncomment any lines pertinent to your configuration and            ***
;         *** feel free to delete anything in here that you are not using.       ***
;         **************************************************************************
; Z probe and compensation definition
; *** WARNING - **Always** make sure your cables are correct, secure and test them thoroughly before homing Z for the first times!
; INSTRUCTIONS :    1) Uncomment your configuration lines
;		    2) M558 *** Do not add the Fxxx parameter for M558 here, it is set in homez.g
;	     	    3) G31 
;		      a) Customize your offsets appropriately, where the probe is X Y is offset from the nozzle.
;		      b) Z is the trigger height (how high your nozzle is from the bed when the probe triggers). You need to dial those in.
;                     c) Tip: A larger trigger height in G31 moves you CLOSER to the bed

; #### Networking and Communications
M552 S1                                ; Enable WiFi
M586 P1 S1                             ; Enable  FTP (default) S0 to disable
;M551 P"myrap"                         ; Machine password (used for FTP), leave disabled for anonymous login on a local network.
M586 P2 S1                             ; Enable Telnet (default) S1 to disable


; #### Probing
M558 P1                                 ; IR probe Probing configuration          
G31 X0 Y35 Z0.765 P500                  ; IR probe Probing configuration
M558 H7.5 A1 T18000 S0.01
; Default mesh levelling
M557 X30:280 Y30:280 P2                 ; Set Default Mesh
; Endstop Configuration 
M574 X1 Y1 S3                           ; Set endstop configuration - motor load configuration for Stall guard config / sensorless
M915 P0:1 S3 R0 F0                      ; both motors because corexy; Sensitivity 4, don’t take action, don’t filter


; #### Axis and motor configuration - Faster speeds, so uncomment only when fully commissioned!
M906 X1300 Y1300 Z1200 E560 I10         ; Set motor currents (mA) and idle at 10%
M201 X3000 Y3000 Z20 E1000              ; Accelerations (mm/s^2)
;M204 P3000 T3000                       ; General maximum acceleration P(print) T(travel)
M203 X24000 Y24000 Z800 E3600           ; Maximum speeds (mm/min)
M566 X1000 Y1000 Z30 E1300              ; Maximum jerk speeds mm/minute
; Leadscrew motor axis steps per unit
M92 Z800                                ; Steps/mm for Z - TR8*4 / 1.8 deg stepper or TR8*8 / 0.9 deg stepper
; Extruder axis steps per unit
M92 E415                                ; Extruder - 1.8 deg/step Steps/mm (Standard BMG pancake stepper 17HS10-0704S)
; Set axis minima:maxima switch positions (Adjust to suit your machine and to make X=0 and Y=0 the edges of the bed)
M208 X-10:300 Y-8:300 Z0:610            ; 300ZLT


; #### Thermistors
; Configure heater fault detection
M570 H1 P5 T25                      ; Hnnn Heater number
			            ; Pnnn Time in seconds for which a temperature anomaly must persist on this heater before raising a heater fault.
				    ; Tnnn Permitted temperature excursion from the setpoint for this heater (default 15C)
; Maximum temperatures
M143 H0 S130                        ; Maximum bed temperature
M143 H1 S295                        ; Maximum nozzle temperature
;  Set temperature sensor parameters
M305 P0 S"Bed" T100000 B3950 R4700 H0 L0 X6 ; Use BOM Thermistor values for bed and remp to x6
; MCU temperature (virtual heater 100) is already defined by firmware
; TMC2660 drivers (virtual heaters 101 and 102) are already defined by firmware
M305 P107 S"Bed heater" T100000 B3950 R4700 X7


; #### Fans
M106 P0 S0 I0 F500 H-1               ; Set fan 0 value, PWM signal inversion and frequency. Thermostatic control is turned off
M106 P1 S1 I0 F500 H1 T45 C"Tool"    ; Set fan 1 value, PWM signal inversion and frequency. Thermostatic control is turned on
M106 P2 S0 I0 F500 H-1 C"Part"       ; Set fan 2 value, PWM signal inversion and frequency. Thermostatic control is turned off
;M106 P3 S1 I0 F500 H-1
;M106 P4 S1 I0 F500 H-1
;M106 P5 S1 I0 F500 H-1
;M106 P6 S1 I0 F500 H-1
M106 P7 T45:65 H100:101:102 C"Elec.Cab.1" ; Electronics cooling fan that starts to turn on when the MCU temperature (virtual heater 100) reaches 45C 
M106 P8 T45:65 H100:101:102 C"Elec.Cab.2" ; and reaches full speed when the MCU temperature reaches 65C or if any TMC2660 drivers 
                                          ; (virtual heaters 101 and 102) report that they are over-temperature
                                          ; F parameter is ignored for fans connected to the fan outputs of a Duex 2 or Duex 5 because those 
                                          ; outputs don't support variable PWM frequency.
                                          ; (N.B. If a fan is configured to trigger on a virtual heater whose sensor represents TMC2660 driver over-temperature 
                                          ; flags, then when the fan turns on it will delay the reporting of an over-temperature warning for the corresponding drivers
                                          ; for a few seconds, to give the fan time to cool the driver down.)

; #### Tools
; Tool definition - E3D Gold
M563 P0 S"E3Dv6 Gold" D0 H1 F2            ; Define tool 0 uses extruder 0, heater 1 ,Fan 2
G10 P0 X0 Y0 Z0                           ; Set tool 0 axis offsets
M143 H1 S290                              ; Maximum H1 (Extruder) heater temperature (E3D requires 285C to change nozzle)


; #### Compensation and Scaling
M556 S80 X0.8 Y0.3 Z0.72               ; Axis compensation (measured with Orthangonal Axis Compensation piece)
;M579 X0 Y0 Z0                         ; Scale Cartesian axes
M572 D0 S0.05                          ; Pressure advance


